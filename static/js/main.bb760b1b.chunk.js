(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{187:function(e,t,n){},188:function(e,t,n){},383:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(35),c=n.n(r),s=(n(187),n.p,n(188),n(189),n(33)),i=n(387),l=n(38),u=n(179),d=n(388),b=n(165),g=n.n(b),j=n(57),p=n.n(j),h=n(102),m=n(168),f=n.n(m),O=n.p+"static/media/logo.605cbd06.gif",x=n(9),v="https://sala-tutorxs.herokuapp.com",C=[],y="(0/4)",D=0,S="".concat(v,"/week");function w(){var e=Object(a.useState)({}),t=Object(s.a)(e,2),n=t[0],o=t[1],r=Object(a.useState)(""),c=Object(s.a)(r,2),b=c[0],j=c[1],m=Object(a.useState)(""),w=Object(s.a)(m,2),T=w[0],A=w[1],k=Object(a.useState)(""),L=Object(s.a)(k,2),E=L[0],z=L[1],B=Object(a.useState)(""),F=Object(s.a)(B,2),R=F[0],_=F[1],I=Object(a.useState)(new Date),M=Object(s.a)(I,2),P=M[0],W=M[1],J=Object(a.useState)(!0),G=Object(s.a)(J,2),H=G[0],N=G[1],Q=Object(a.useState)(""),q=Object(s.a)(Q,2),K=(q[0],q[1]),U=Object(a.useState)(""),V=Object(s.a)(U,2),X=V[0],Y=V[1],Z=Object(a.useState)({email:"",nombre:"",gds:"",apodo:"",pronombre:"",tiene_llave:!1,gda:"",rol:[]}),$=Object(s.a)(Z,2),ee=$[0],te=$[1];function ne(){var e;p.a.get(S,{},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){C=e.data.schedule,D=new Date(C[0].date),W(D),e.data.cupos,y=e.data.cupos_0,o({})})).catch((function(e){console.log(e),e.response})),(e=3e3,new Promise((function(t){return setTimeout(t,e)}))).then((function(){N(!1)}))}var ae=function(e){if(e){console.log(e),z(e.Ws.Ht),_(e.Ws.Qe),K(e.Ws.wJ);var t="".concat(v,"/tutore?email=")+e.Ws.Ht;p.a.get(t,{},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){te(e.data),j(e.data.apodo),Y(e.data.apodo)})).catch((function(e){console.log(e),e.response}))}else z(""),_(""),te({email:"",nombre:"",pronombre:"",apodo:"",gds:"",tiene_llave:!1,rol:[],gda:""});ne()},oe=function(e){for(var t in C)if(Date.parse(new Date(C[t].date))===Date.parse(e))return"".concat(C[t].cupos);return y},re="rgba(89, 154, 242, 1)",ce="rgba(162, 198, 248, 1)",se="#dbedff",ie=function(e){var t=!0,n=!1,a=!1;for(var o in C)Date.parse(new Date(C[o].date))===Date.parse(e)&&(t=C[o].verde,n=C[o].not,E&&C[o].emails.includes(E)&&(a=!0));return t?a?(re="#EC7063",ce="#52BE80",se="#7DCEA0"):n?(re="rgba(142, 68, 173, 1)",ce="rgba(187, 143, 206, 1)",se="#D2B4DE"):(re="rgba(89, 154, 242, 1)",ce="rgba(162, 198, 248, 1)",se="#dbedff"):(re="rgba(142, 68, 173, 1)",ce="rgba(187, 143, 206, 1)",se="#D2B4DE"),[re,ce,se]},le=function(e){if(!e)return Object(x.jsx)("span",{});var t=e.rol,n="#E74C3C";return"coordi"===t?n="#273746":"jefx"===t&&(n="rgba(46, 134, 193, 1)"),Object(x.jsx)("span",{className:"ant-btn-primary tutore",style:{backgroundColor:n,color:"white",borderRadius:"0.3rem",borderColor:"transparent",margin:"0.1rem",fontSize:"0.8rem",paddingTop:"0.2rem",paddingBottom:"0.26rem",paddingLeft:"0.3rem",paddingRight:"0.3rem",verticalAlign:"center"},children:e.nombre},e.nombre)};return Object(x.jsx)(f.a,{loading:H,bgColor:"#ff5757",textColor:"white",logoSrc:O,text:"Buscando las llaves de la sala...",children:Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{children:"Salita Tutores \ud83e\udd70"}),Object(x.jsx)(i.a,{style:{width:600},children:Object(x.jsxs)(l.a,{children:[Object(x.jsx)(g.a,{timeFormat:"h",startDate:P,numDays:5,minTime:1,maxTime:8,selection:n.schedule,onChange:function(e){o({schedule:e})},renderDateCell:function(e,t,n){var a=ie(e),o=Object(s.a)(a,3),r=o[0],c=o[1],i=o[2];return Object(x.jsx)("div",{style:{textAlign:"center",backgroundColor:t?r:c},ref:n,onMouseOver:function(t){t.target.style.backgroundColor=i,A(function(e){var t=[];for(var n in C)Date.parse(new Date(C[n].date))===Date.parse(e)&&(t=C[n].nombres);var a=[];for(var o in t)a.push(le(t[o]));return a}(e))},onMouseLeave:function(e){e.target.style.backgroundColor=t?r:c},children:oe(e)})},dateFormat:"DD/MM"}),Object(x.jsxs)("p",{style:{marginTop:"2%"},children:["Tutores en la casilla: ",T]}),Object(x.jsx)(u.a,{type:"primary",size:"large",style:{textAlign:"center",marginTop:"5%",borderRadius:"10px",fontSize:"15px",color:"white"},onClick:ne,children:"Recargar"}),Object(x.jsx)(u.a,{type:"primary",size:"large",style:{textAlign:"center",marginTop:"5%",borderRadius:"10px",fontSize:"15px",color:"white"},onClick:function(){p.a.post("".concat(v,"/horarios/reservar"),{tutore:ee,schedule:n},{tutore:ee,schedule:n}).then((function(e){ne()}))},children:"Enviar"}),Object(x.jsx)(d.a,{placeholder:"Cambiar tu nombre",value:b,style:{marginTop:"1%"},onChange:function(e){return j(e.target.value)}}),Object(x.jsx)(u.a,{type:"primary",size:"large",style:{textAlign:"center",marginTop:"5%",borderRadius:"10px",fontSize:"15px",color:"white"},onClick:function(){p.a.put("".concat(v,"/tutore/change-name"),{nombre:b,tutore:ee,schedule:n},{nombre:b,tutore:ee,schedule:n}).then((function(e){Y(e.data.name)})),ne()},children:"Cambiar mi nombre"})]})}),Object(x.jsx)("h1",{children:E}),Object(x.jsx)("h1",{children:R}),Object(x.jsx)("h1",{children:X}),ee&&ee.email?Object(x.jsx)(h.GoogleLogout,{clientId:"808906601781-26v2s8buno09vr8u6ftnvfonv598o5ft.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:ae}):Object(x.jsx)(h.GoogleLogin,{clientId:"808906601781-26v2s8buno09vr8u6ftnvfonv598o5ft.apps.googleusercontent.com",buttonText:"Login",onSuccess:ae,onFailure:ae,cookiePolicy:"single_host_origin",isSignedIn:!0})]})})}p.a.get(S,{},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){C=e.data.schedule,e.data.cupos,y=e.data.cupos_0})).catch((function(e){console.log(e),e.response}));var T=n(178),A=n(12);var k=function(){return Object(x.jsx)("div",{className:"App",children:Object(x.jsx)(T.a,{children:Object(x.jsx)(A.a,{exact:!0,path:"/sala",children:Object(x.jsx)(w,{})})})})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,390)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),r(e),c(e)}))};c.a.render(Object(x.jsx)(o.a.StrictMode,{children:Object(x.jsx)(k,{})}),document.getElementById("root")),L()}},[[383,1,2]]]);
//# sourceMappingURL=main.bb760b1b.chunk.js.map