(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{218:function(e,t,n){},219:function(e,t,n){},413:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),s=n.n(c),o=(n(218),n.p,n(219),n(220),n(27)),i=n(418),l=n(419),d=n(417),u=n(57),b=n(208),j=n(71),g=n(420),h=n(416),p=n(42),O=n(422),m=n(423),f=n(196),x=n.n(f),v=n(59),C=n.n(v),y=n(132),D=n(199),w=n.n(D),S=n.p+"static/media/logo.605cbd06.gif",k=n(421),L=n.p+"static/media/logo.f4f94bfe.svg",A=n(7),T="https://sala-tutorxs.herokuapp.com",F="808906601781-gnnc5q5lrvr25lf9nci6rc79824mgiok.apps.googleusercontent.com",N=i.a.Link,I=[],M="(0/4)",B=0,E="".concat(T,"/week");function P(){var e=new Date;e.setDate(e.getDate()-e.getDay()+1);var t=Object(a.useState)({}),n=Object(o.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)(""),f=Object(o.a)(s,2),v=f[0],D=f[1],P=Object(a.useState)(""),W=Object(o.a)(P,2),_=W[0],R=W[1],H=Object(a.useState)(""),J=Object(o.a)(H,2),z=J[0],G=J[1],q=Object(a.useState)(""),Q=Object(o.a)(q,2),V=(Q[0],Q[1]),Z=Object(a.useState)(!1),K=Object(o.a)(Z,2),U=K[0],X=K[1],Y=Object(a.useState)(e),$=Object(o.a)(Y,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),ae=Object(o.a)(ne,2),re=ae[0],ce=ae[1],se=Object(a.useState)(!0),oe=Object(o.a)(se,2),ie=oe[0],le=oe[1],de=Object(a.useState)(5),ue=Object(o.a)(de,2),be=ue[0],je=ue[1],ge=Object(a.useState)(!1),he=Object(o.a)(ge,2),pe=he[0],Oe=he[1],me=Object(a.useState)(""),fe=Object(o.a)(me,2),xe=(fe[0],fe[1]),ve=Object(a.useState)(""),Ce=Object(o.a)(ve,2),ye=Ce[0],De=Ce[1],we=Object(a.useState)({email:"",nombre:"",gds:"",apodo:"",pronombre:"",tiene_llave:!1,gda:"",rol:[]}),Se=Object(o.a)(we,2),ke=Se[0],Le=Se[1];function Ae(){var e;C.a.get(E,{},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){I=e.data.schedule,B=new Date("".concat(e.data.start," 13:00:00")),!0===re&&B.setDate(B.getDate()+7),te(B),e.data.cupos,M=e.data.cupos_0,c({})})).catch((function(e){console.log(e),e.response})),(e=2e3,new Promise((function(t){return setTimeout(t,e)}))).then((function(){!0}))}var Te,Fe=function(e){if(ce(!1),Ae(),e&&"Ws"in e){G(e.Ws.Ht),V(e.Ws.Qe),xe(e.Ws.wJ);var t="".concat(T,"/tutore?email=")+e.Ws.Ht;C.a.get(t,{},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){Le(e.data),D(e.data.apodo),De(e.data.apodo)})).catch((function(e){console.log(e),e.response}))}else G(""),V(""),De(""),Le({email:"",nombre:"",pronombre:"",apodo:"",gds:"",tiene_llave:!1,rol:[],gda:""});Ae()},Ne=function(e){for(var t in I)if(Date.parse(new Date(I[t].date))===Date.parse(e))return"".concat(I[t].cupos);return M},Ie="rgba(89, 154, 242, 1)",Me="rgba(162, 198, 248, 1)",Be="#dbedff",Ee=function(e){var t=!0,n=!1,a=!1;for(var r in I)Date.parse(new Date(I[r].date))===Date.parse(e)&&(t=I[r].verde,n=I[r].not,z&&I[r].emails.includes(z)&&(a=!0));return t?a?(Ie="#EC7063",Me="#52BE80",Be="#7DCEA0"):n||6===e.getDay()||0===e.getDay()?(Ie="#e8ebed",Me="#e8ebed",Be="#b5c0c7",(ke.rol.includes("pfg")||ke.rol.includes("supertutore"))&&(Ie="#657786",Be="#8ea0ab")):(Ie="rgba(89, 154, 242, 1)",Me="rgba(162, 198, 248, 1)",Be="#dbedff"):(Ie="#e8ebed",Me="#e8ebed",Be="#e8ebed",(ke.rol.includes("pfg")||ke.rol.includes("supertutore"))&&(Ie="#657786",Be="#8ea0ab")),[Ie,Me,Be]},Pe=function(){C.a.post("".concat(T,"/horarios/modificar"),{tutore:ke,schedule:r},{tutore:ke,schedule:r}).then((function(e){Ae()})).catch((function(e){console.log(e)}))},We=function(e){if(!e)return Object(A.jsx)("span",{});var t=e.rol,n="#E74C3C";return"coordi"===t?n="#273746":"jefx"===t&&(n="rgba(46, 134, 193, 1)"),Object(A.jsx)("span",{className:"ant-btn-primary-3 tutore",style:{backgroundColor:n,color:"white",borderRadius:"0.3rem",borderColor:"transparent",margin:"0.1rem",fontSize:"0.8rem",paddingTop:"0.2rem",paddingBottom:"0.26rem",paddingLeft:"0.3rem",paddingRight:"0.3rem",verticalAlign:"center"},children:e.nombre},e.nombre)},_e=function(){C.a.put("".concat(T,"/tutore/change-name"),{nombre:v,tutore:ke,schedule:r},{nombre:v,tutore:ke,schedule:r}).then((function(e){De(e.data.name),Ae()})),X(!1)};pe||(Ae(),(Te=2380,new Promise((function(e){return setTimeout(e,Te)}))).then((function(){Oe(!0),le(!1)})));var Re=function(){X(!1)};return Object(A.jsxs)(w.a,{loading:ie,bgColor:"#ff5757",spinnerColor:"#9ee5f8",textColor:"white",logoSrc:S,text:"Buscando las llaves de la sala...",children:[Object(A.jsxs)("div",{className:"principal",children:[Object(A.jsx)("div",{className:"header",children:Object(A.jsxs)(j.a,{align:"middle",justify:"space-between",children:[Object(A.jsx)("img",{src:L,style:{width:50},alt:""}),Object(A.jsx)(i.a,{className:"anchor",targetOffset:"70",children:Object(A.jsx)(u.a,{type:"link",onClick:function(){X(!0)},children:Object(A.jsx)(N,{title:ye})})})]})}),Object(A.jsxs)("div",{id:"home",className:"wave-container",children:[Object(A.jsx)(j.a,{justify:"center",style:{marginLeft:"15px",marginRight:"15px"},children:Object(A.jsxs)(g.b,{size:"small",direction:"vertical",children:[Object(A.jsx)("h1",{className:"title",children:"Sala de Tutores"}),Object(A.jsxs)("p",{className:"description",children:[Object(A.jsx)(O.a,{})," Reserva tus m\xf3dulos en la salita ",Object(A.jsx)(O.a,{})]}),Object(A.jsx)("br",{}),ke&&ke.email&&ke.apodo?Object(A.jsx)(y.GoogleLogout,{clientId:F,buttonText:"Cerrar Sesi\xf3n",onLogoutSuccess:Fe}):Object(A.jsx)(y.GoogleLogin,{clientId:F,buttonText:"Iniciar Sesi\xf3n \u2764",onSuccess:Fe,onFailure:Fe,cookiePolicy:"single_host_origin",isSignedIn:!0})]})}),Object(A.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 320",children:Object(A.jsx)("path",{fill:"#fff","fill-opacity":"1",d:"M0,32L60,37.3C120,43,240,53,360,85.3C480,117,600,171,720,202.7C840,235,960,245,1080,224C1200,203,1320,149,1380,122.7L1440,96L1440,320L1380,320C1320,320,1200,320,1080,320C960,320,840,320,720,320C600,320,480,320,360,320C240,320,120,320,60,320L0,320Z"})})]}),""!==ke.email&&Object(A.jsx)("div",{id:"reservar",children:Object(A.jsx)(j.a,{justify:"center",children:Object(A.jsxs)(h.a,{style:{alignItems:"center"},bordered:!1,children:[Object(A.jsxs)(p.a,{xs:24,sm:30,md:36,lg:44,xl:50,children:[Object(A.jsx)(x.a,{timeFormat:"h",startDate:ee,numDays:be,minTime:1,maxTime:8,selection:r.schedule,onChange:function(e){c({schedule:e})},renderDateCell:function(e,t,n){var a=Ee(e),r=Object(o.a)(a,3),c=r[0],s=r[1],i=r[2];return Object(A.jsx)("div",{style:{textAlign:"center",backgroundColor:t?c:s,borderRadius:"20px",height:"30px",padding:"3px"},ref:n,onMouseOver:function(t){t.target.style.backgroundColor=i,R(function(e){var t=[];for(var n in I)Date.parse(new Date(I[n].date))===Date.parse(e)&&(t=I[n].nombres);var a=[];for(var r in t)a.push(We(t[r]));return a}(e))},onMouseLeave:function(e){e.target.style.backgroundColor=t?c:s},children:Ne(e)})},renderTimeLabel:function(e){return Object(A.jsx)("span",{className:"timeFont",children:{1:"08:30",2:"10:00",3:"11:30",4:"13:00",5:"14:00",6:"15:30",7:"17:00"}[e.getHours()]})},renderDateLabel:function(e){return Object(A.jsxs)("span",{className:"dateFont",children:[{1:"L",2:"M",3:"W",4:"J",5:"V",6:"S",0:"D"}[e.getDay()]," ",e.getDate()]})},dateFormat:"ddd DD"}),Object(A.jsx)("br",{}),Object(A.jsxs)(g.b,{children:[Object(A.jsx)(u.a,{type:"primary",shape:"round",style:{textAlign:"center",color:"white"},onClick:Ae,children:Object(A.jsx)(m.a,{})}),Object(A.jsx)(u.a,{type:"primary",shape:"round",style:{textAlign:"center",color:"white"},onClick:function(){C.a.post("".concat(T,"/horarios/reservar"),{tutore:ke,schedule:r},{tutore:ke,schedule:r}).then((function(e){e.data.status||b.b.warning(e.data.message),Ae()}))},children:"Enviar"}),function(){if(ke.rol)return ke.rol.includes("pfg")||ke.rol.includes("supertutore")?Object(A.jsx)(u.a,{type:"primary",shape:"round",style:{textAlign:"center",color:"white"},onClick:Pe,children:"Modificar Horario"}):void 0}()]}),Object(A.jsx)("br",{}),Object(A.jsx)("br",{}),Object(A.jsx)(h.a,{title:"Tutores en el m\xf3dulo",bordered:!1,style:{backgroundColor:"#F5F8FA",height:"130px"},children:Object(A.jsx)(j.a,{align:"middle",justify:"center",style:{height:"70px"},children:_})})]}),Object(A.jsx)("br",{}),Object(A.jsx)(g.b,{align:"center",direction:"vertical",size:"small",children:(ke.rol.includes("pfg")||ke.rol.includes("supertutore"))&&Object(A.jsx)(k.a,{style:{position:"relative"},onChange:function(){ke.rol.includes("pfg")||ke.rol.includes("supertutore")?(re?(je(5),ee.setDate(ee.getDate()-7)):(je(5),ee.setDate(ee.getDate()+7)),ce(!re)):(ce(!1),je(5))},children:" "})})]})})}),ke.email?Object(A.jsx)(l.a,{title:"Cambia tu nombre!",visible:U,onOk:_e,onCancel:Re,okText:"Cambiar",children:Object(A.jsx)(d.a,{placeholder:"Cambiar tu nombre",value:v,style:{marginTop:"1%"},onChange:function(e){return D(e.target.value)}})}):Object(A.jsx)("span",{style:{width:"100%"}})]}),Object(A.jsxs)("p",{style:{textAlign:"center",marginTop:"4%"},children:["Made with ",Object(A.jsx)(O.a,{})," by PFGang"]})]})}C.a.get(E,{},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){I=e.data.schedule,e.data.cupos,M=e.data.cupos_0})).catch((function(e){console.log(e),e.response}));var W=n(207),_=n(20);var R=function(){return Object(A.jsx)("div",{className:"App",children:Object(A.jsx)(W.a,{children:Object(A.jsx)(_.a,{exact:!0,path:"/sala",children:Object(A.jsx)(P,{})})})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,424)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};s.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(R,{})}),document.getElementById("root")),H()}},[[413,1,2]]]);
//# sourceMappingURL=main.edd31b94.chunk.js.map