(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{186:function(e,t,n){},187:function(e,t,n){},383:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(35),c=n.n(o),i=(n(186),n.p,n(187),n(188),n(33)),s=n(388),l=n(38),u=n(178),d=n(389),b=n(391),g=n(165),j=n.n(g),p=n(57),h=n.n(p),m=n(102),f=(n(273),n.p,n(9)),O="https://sala-tutorxs.herokuapp.com",x="808906601781-gnnc5q5lrvr25lf9nci6rc79824mgiok.apps.googleusercontent.com",v=[],y="(0/4)",C=0,D="".concat(O,"/week");function S(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],r=t[1],o=Object(a.useState)(""),c=Object(i.a)(o,2),g=c[0],p=c[1],S=Object(a.useState)(""),w=Object(i.a)(S,2),A=w[0],T=w[1],k=Object(a.useState)(""),E=Object(i.a)(k,2),L=E[0],F=E[1],z=Object(a.useState)(""),B=Object(i.a)(z,2),M=B[0],R=B[1],_=Object(a.useState)(new Date),I=Object(i.a)(_,2),P=I[0],W=I[1],G=Object(a.useState)(!0),J=Object(i.a)(G,2),H=(J[0],J[1]),N=Object(a.useState)(""),q=Object(i.a)(N,2),Q=(q[0],q[1]),K=Object(a.useState)(""),U=Object(i.a)(K,2),V=U[0],X=U[1],Y=Object(a.useState)({email:"",nombre:"",gds:"",apodo:"",pronombre:"",tiene_llave:!1,gda:"",rol:[]}),Z=Object(i.a)(Y,2),$=Z[0],ee=Z[1],te=!1;function ne(){var e;h.a.get(D,{},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){v=e.data.schedule,C=new Date(v[0].date),W(C),e.data.cupos,y=e.data.cupos_0,r({})})).catch((function(e){console.log(e),e.response})),(e=3e3,new Promise((function(t){return setTimeout(t,e)}))).then((function(){H(!1),console.log("deberia salirse la carga"),te=!0}))}Object(a.useEffect)((function(){!0===te&&(H(!1),console.log("deberia salirse po"))}),[te]);var ae=function(e){if(console.log("AAA",e),e.Ws){F(e.Ws.Ht),R(e.Ws.Qe),Q(e.Ws.wJ);var t="".concat(O,"/tutore?email=")+e.Ws.Ht;h.a.get(t,{},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){ee(e.data),p(e.data.apodo),X(e.data.apodo)})).catch((function(e){console.log(e),e.response}))}else F(""),R(""),ee({email:"",nombre:"",pronombre:"",apodo:"",gds:"",tiene_llave:!1,rol:[],gda:""});ne()},re=function(e){for(var t in v)if(Date.parse(new Date(v[t].date))===Date.parse(e))return"".concat(v[t].cupos);return y},oe="rgba(89, 154, 242, 1)",ce="rgba(162, 198, 248, 1)",ie="#dbedff",se=function(e){var t=!0,n=!1,a=!1;for(var r in v)Date.parse(new Date(v[r].date))===Date.parse(e)&&(t=v[r].verde,n=v[r].not,L&&v[r].emails.includes(L)&&(a=!0));return t?a?(oe="#EC7063",ce="#52BE80",ie="#7DCEA0"):n?(oe="rgba(142, 68, 173, 1)",ce="rgba(187, 143, 206, 1)",ie="#D2B4DE"):(oe="rgba(89, 154, 242, 1)",ce="rgba(162, 198, 248, 1)",ie="#dbedff"):(oe="rgba(142, 68, 173, 1)",ce="rgba(187, 143, 206, 1)",ie="#D2B4DE"),[oe,ce,ie]},le=function(e){if(!e)return Object(f.jsx)("span",{});var t=e.rol,n="#E74C3C";return"coordi"===t?n="#273746":"jefx"===t&&(n="rgba(46, 134, 193, 1)"),Object(f.jsx)("span",{className:"ant-btn-primary tutore",style:{backgroundColor:n,color:"white",borderRadius:"0.3rem",borderColor:"transparent",margin:"0.1rem",fontSize:"0.8rem",paddingTop:"0.2rem",paddingBottom:"0.26rem",paddingLeft:"0.3rem",paddingRight:"0.3rem",verticalAlign:"center"},children:e.nombre},e.nombre)};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Salita Tutores \ud83e\udd70"}),Object(f.jsx)(s.a,{style:{width:600},children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(j.a,{timeFormat:"h",startDate:P,numDays:5,minTime:1,maxTime:8,selection:n.schedule,onChange:function(e){r({schedule:e})},renderDateCell:function(e,t,n){var a=se(e),r=Object(i.a)(a,3),o=r[0],c=r[1],s=r[2];return Object(f.jsx)("div",{style:{textAlign:"center",backgroundColor:t?o:c},ref:n,onMouseOver:function(t){t.target.style.backgroundColor=s,T(function(e){var t=[];for(var n in v)Date.parse(new Date(v[n].date))===Date.parse(e)&&(t=v[n].nombres);var a=[];for(var r in t)a.push(le(t[r]));return a}(e))},onMouseLeave:function(e){e.target.style.backgroundColor=t?o:c},children:re(e)})},dateFormat:"DD/MM"}),Object(f.jsxs)("p",{style:{marginTop:"2%"},children:["Tutores en la casilla: ",A]}),Object(f.jsx)(u.a,{type:"primary",size:"large",style:{textAlign:"center",marginTop:"5%",borderRadius:"10px",fontSize:"15px",color:"white"},onClick:ne,children:"Recargar"}),Object(f.jsx)(u.a,{type:"primary",size:"large",style:{textAlign:"center",marginTop:"5%",borderRadius:"10px",fontSize:"15px",color:"white"},onClick:function(){h.a.post("".concat(O,"/horarios/reservar"),{tutore:$,schedule:n},{tutore:$,schedule:n}).then((function(e){ne()}))},children:"Enviar"}),Object(f.jsx)(d.a,{placeholder:"Cambiar tu nombre",value:g,style:{marginTop:"1%"},onChange:function(e){return p(e.target.value)}}),Object(f.jsx)(u.a,{type:"primary",size:"large",style:{textAlign:"center",marginTop:"5%",borderRadius:"10px",fontSize:"15px",color:"white"},onClick:function(){h.a.put("".concat(O,"/tutore/change-name"),{nombre:g,tutore:$,schedule:n},{nombre:g,tutore:$,schedule:n}).then((function(e){X(e.data.name)})),ne()},children:"Cambiar mi nombre"})]})}),Object(f.jsx)("h1",{children:L}),Object(f.jsx)("h1",{children:M}),Object(f.jsx)("h1",{children:V}),$&&$.email?Object(f.jsx)(m.GoogleLogout,{clientId:x,buttonText:"Logout",onLogoutSuccess:ae}):Object(f.jsx)(m.GoogleLogin,{clientId:x,buttonText:"Login",onSuccess:ae,onFailure:ae,cookiePolicy:"single_host_origin",isSignedIn:!0}),Object(f.jsxs)("p",{style:{textAlign:"center",marginTop:"4%"},children:["Made with ",Object(f.jsx)(b.a,{})," by PFGang"]})]})}h.a.get(D,{},{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){v=e.data.schedule,e.data.cupos,y=e.data.cupos_0})).catch((function(e){console.log(e),e.response}));var w=n(177),A=n(12);var T=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(w.a,{children:Object(f.jsx)(A.a,{exact:!0,path:"/sala",children:Object(f.jsx)(S,{})})})})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,392)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(T,{})}),document.getElementById("root")),k()}},[[383,1,2]]]);
//# sourceMappingURL=main.abacf4ee.chunk.js.map